use std::fs::File;
use std::io::{self, Read, BufReader, prelude::*};

fn main() -> std::io::Result<()> {
    let f = BufReader::new(File::open("fairies.wav")?);
    let mut bytes = f.bytes();

    for _ in 1..=4 {
        if let Some(Ok(b)) = bytes.next() {
            print!("{}", char::from(b));
        }
    }
    println!("");

    let mut chunk_size: u64 = 0;
    for i in 0..=3 {
        if let Some(Ok(b)) = bytes.next() {
            chunk_size |= (b as u64) << (i * 8);
        }
    }
    println!("Chunk size: {}", chunk_size);

    for _ in 1..=4 {
        if let Some(Ok(b)) = bytes.next() {
            print!("{}", char::from(b));
        }
    }
    println!("");

    Ok(())
}
